<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cycle_routes • openinfra</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="cycle_routes">
<meta property="og:description" content="openinfra">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openinfra</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/openinfra.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/QGIS_OSM_Setup.html">Getting and using OSM data with GUI QGIS</a>
    </li>
    <li>
      <a href="../articles/SOTM_workshop.html">SOTM 2022 Workshop - OSM for sustainable transport planning: getting started</a>
    </li>
    <li>
      <a href="../articles/data_packs.html">Transport Infrastructure Data Packs</a>
    </li>
    <li>
      <a href="../articles/data_packs_documentation.html">data_packs_documentation</a>
    </li>
    <li>
      <a href="../articles/getosm.html">Getting and using OSM data with the R package osmextract</a>
    </li>
    <li>
      <a href="../articles/im_get.html">Function and documentation for Inclusive Mobility guide (2021)</a>
    </li>
    <li>
      <a href="../articles/osm-python.html">Getting and using osm data in Python</a>
    </li>
    <li>
      <a href="../articles/package_networks.html">Network definitions (pre-defined networks) by OSM data package</a>
    </li>
    <li>
      <a href="../articles/proposed_cycle_routes.html">cycle_routes</a>
    </li>
    <li>
      <a href="../articles/regions.html">Transport regions in the UK</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/udsleeds/openinfra/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>cycle_routes</h1>
                        <h4 data-toc-skip class="author">James Hulse</h4>
            
            <h4 data-toc-skip class="date">2022-10-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/udsleeds/openinfra/blob/HEAD/vignettes/proposed_cycle_routes.Rmd" class="external-link"><code>vignettes/proposed_cycle_routes.Rmd</code></a></small>
      <div class="hidden name"><code>proposed_cycle_routes.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="cycle-routes-nationallocal-from-osm-ways-relations">Cycle Routes (National/Local) from OSM ways &amp; relations<a class="anchor" aria-label="anchor" href="#cycle-routes-nationallocal-from-osm-ways-relations"></a>
</h2>
<p>From <a href="https://github.com/udsleeds/openinfra/issues/121" class="external-link">#121</a> and <a href="https://github.com/udsleeds/openinfra/issues/146" class="external-link">#146</a> we know there is a requirement to have named cycle routes (both Local - lcn, and National -ncn) included within the data packs.</p>
<p>These networks are represented in OSM data with the lcn (Local Cycle Network) and ncn (National Cycle Network) tags. Such tags are present on ways (legacy tagging) and relations (preferred way of mapping).</p>
<p>We can obtain OSM “lines” (ways) and “multilinestrings”/“other_relations” (relations) data from <a href="https://github.com/ropensci/osmextract" class="external-link"><code>osmextract</code></a> within <a href="https://docs.ropensci.org/osmextract/reference/oe_get.html?q=oe_get#null" class="external-link"><code>oe_get()</code></a> specifying the <code>layer</code> paramater.</p>
<p>Data from the relations layer (multilinestring &amp; other_relations), by default, contains a number of extra tags than returned from the “lines” layer. Most notably:</p>
<ul>
<li><p>route=* - this key describes the type of route relation. i.e. “foot”, “bicycle”, “bus”</p></li>
<li><p>network=* - this key indicates the <em>scope</em> of the route described. i.e. route=“bicycle” &amp; network=“ncn” implies a cycle route that is part of a <a href="https://www.sustrans.org.uk/national-cycle-network?gclid=CjwKCAjwqJSaBhBUEiwAg5W9p3jzntuPCSBESTAgh5JiNTZrbaC5buKYh3wpqF5seFiBUnP48dzmBhoCs58QAvD_BwE" class="external-link">national cycle network</a> route. See below for a list of possible cycle route values.</p></li>
<li><p>cycle_network=* due to generic use of “lcn”, “ncn”, “icn” in cycle route realtions, this tag may be used in places that require more granular network distinctions.</p></li>
</ul>
<p><br><br></p>
<div class="section level3">
<h3 id="possible-cycle-walking-route-values">Possible cycle &amp; walking route values<a class="anchor" aria-label="anchor" href="#possible-cycle-walking-route-values"></a>
</h3>
<p>Sourced: <a href="https://wiki.openstreetmap.org/wiki/Key:network#Bicycle,_hiking_and_other_recreational_routes" class="external-link">Bicycle, hiking and other recreational routes</a> –&gt; <a href="https://wiki.openstreetmap.org/wiki/Cycle_routes#Relations" class="external-link">Cycle routes relations</a></p>
<p>It is preferred to tag the cycle routes using relations instead of tagging the ways. But please check that a relation doesn’t already exist for your chosen route before creating one. Links to country-specific overview pages of cycle networks are below.</p>
<p>The tags on the relation are slightly modified from the standard tags. An example cycle route relation would have the following tags:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Tag</th>
<th>Comment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>type=route</td>
<td></td>
</tr>
<tr class="even">
<td>route=bicycle/mtb</td>
<td>See mountainbike for details on tagging mountainbike routes.</td>
</tr>
<tr class="odd">
<td>network=icn/ncn/rcn/lcn</td>
<td>Specify the network as an international route, a national route, a regional route, or a local route, as per the normal tagging of cycle routes. For tagging mountainbike routes more specific look here mountainbike</td>
</tr>
<tr class="even">
<td>cycle_network=*</td>
<td>(optional) In countries that have (for instance) multiple regional route networks, this tag indicates the specific route system, much the way network=* does on road route relations.</td>
</tr>
<tr class="odd">
<td>ref=number</td>
<td>(optional) Numerical part of reference code of the route. (This formal limit was introduced originally to cater for a certain renderer, so using the full code should be fine too, as long as it can be read from signs along the route.) The network or cycle_network tag already distinguishes the type, so just use “ref” and not “ncn_ref” or similar.</td>
</tr>
<tr class="even">
<td>name=*</td>
<td>(optional) The name of the route e.g. Jubilee Cycle Way</td>
</tr>
<tr class="odd">
<td>state=proposed</td>
<td>(optional) Routes are sometimes not official routes pending some negotiation or development – the opencyclemap rendering shows these routes dotted.</td>
</tr>
<tr class="even">
<td>distance=distance in km</td>
<td>(optional) The distance covered by a route in km</td>
</tr>
<tr class="odd">
<td>ascent=ascent in m</td>
<td>(optional) The ascent covered by a route in meters. If a route has start and end point at different altitude use descent too</td>
</tr>
<tr class="even">
<td>descent=descent in m</td>
<td>(optional) The descent covered by a route in meters. Use it only if it differs from the ascent (different altitude at start/endpoint of a route).</td>
</tr>
<tr class="odd">
<td>roundtrip=yes/no</td>
<td>(optional) Use roundtrip=no to indicate that a route goes from A to B. Use roundtrip=yes to indicate that the start and finish of the route are at the same location (circular route).</td>
</tr>
<tr class="even">
<td>colour=*</td>
<td>(optional) To indicate the official colour associated with a route. In the Waymarked Trails cycling map, the displayed ref/name of a route gets underlined in this colour (example).</td>
</tr>
</tbody>
</table>
<p>Further information on UK cycle routes, sourced from the <a href="https://wiki.openstreetmap.org/wiki/Cycle_routes#Usage" class="external-link">UK cycle routes OSM wiki</a>, is below:</p>
<div class="figure">
<img src="https://user-images.githubusercontent.com/58815827/195082654-500bc57d-725e-44ee-a87e-e211189cfdd3.png" alt=""><p class="caption">Screenshot from 2022-10-11 12-52-10</p>
</div>
<p><br><br></p>
</div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="section level3">
<h3 id="required-tags">Required Tags<a class="anchor" aria-label="anchor" href="#required-tags"></a>
</h3>
<p>Tags required for the analysis of cycle routes include:</p>
<pre><code><span><span class="va">minimum_tags</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lcn"</span>, <span class="st">"lcn_ref"</span>, <span class="st">"ncn"</span>, <span class="st">"ncn_ref"</span>, <span class="st">"type"</span>, <span class="st">"route"</span>, <span class="st">"network"</span>, <span class="st">"cycle_network"</span>, <span class="st">"name"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="tag-justifications">Tag Justifications<a class="anchor" aria-label="anchor" href="#tag-justifications"></a>
</h3>
<ul>
<li><p>lcn|lcn_ref|ncn|ncn_ref - these tags describe if a way is part of a national or local cycling network. *_ref is additional information on the network (i.e. ncn_ref 1 implies way is part of ncn 1)</p></li>
<li><p>type - relation specific common key used to mark a relations type (important as we want to parse the “routes” values)</p></li>
<li><p>route - relation specific common key used to mark what a relation captures (important as we want route relations for “bicycle”, rather than say “bus”)</p></li>
<li><p>network - relation specific key that indicates the scope of a relation (typical values are lcn, ncn, rcn, icn)</p></li>
<li><p>cycle_network - relation specific key to indicate more granular network descriptions (i.e. GB:London Cycle Network)</p></li>
<li><p>name - standard OSM tag that allows naming of features. This tag <strong>is only useful for relations where a name covers the entire relation</strong>, unlike ways, where the name=* key will be the name of the current way</p></li>
</ul>
<p><br><br></p>
</div>
</div>
<div class="section level2">
<h2 id="processing">Processing<a class="anchor" aria-label="anchor" href="#processing"></a>
</h2>
<div class="section level3">
<h3 id="ways-layer">Ways Layer<a class="anchor" aria-label="anchor" href="#ways-layer"></a>
</h3>
<p>Note that this is the legacy method for tagging lcn &amp; ncn routes. Ideally this should now be done via a relation, rather than tagging highways with lcn=* / ncn=*.</p>
<p>Processing steps applied to ways layer to obtain ways that form parts of a lcn / ncn route:</p>
<ul>
<li><p>1 - ways <code>lcn</code>/<code>ncn</code> keys must be == “yes|proposed”</p></li>
<li><p>2 - ways <code>lcn_ref</code>/<code>ncn_ref</code> are optional. These keys indicate what route a way is apart of (i.e. ncn = “yes” &amp; ncn_ref = 1 –&gt; route: NCN 1)</p></li>
</ul>
<p>And that is it!</p>
<p>Whilst the <code>name</code> tag is useful for relations (relations will typically be named by <code>name</code> with the route they capture i.e. Surrey Cycleway), when considering ways the <code>name</code> key indicates the name of the current way, and not any relations that may contain it (i.e. although this way may be part of the Surrey Cycleway relation, its specific way name = “Long Lane Road”)</p>
</div>
<div class="section level3">
<h3 id="relation-layer">Relation Layer<a class="anchor" aria-label="anchor" href="#relation-layer"></a>
</h3>
<p>Processing steps applied to relations layer to obtain lcn &amp; ncn routes.</p>
<ul>
<li><p>1 - relations <code>type</code> key must be == “route” (we want relations of cycle <strong>routes</strong>)</p></li>
<li><p>2 - relations <code>route</code> key must be == “bicycle” (we want cycling routes, not bus routes for example)</p></li>
<li><p>3 - relations <code>network</code> key must be == “lcn|ncn” (want realtions that capture local and national cycle routes only)</p></li>
<li><p>4 - relations <code>cycle_network</code> key is optional. Provides a more specific description of the cycle route that just ncn 5 (i.e. GB:London Cycle Network). If not NA, use this as a name/descriptior</p></li>
<li><p>5 - relations <code>name</code> key is opetional, but for relations this will often describe the name of the route captured by the relation (i.e. LCN 25 or Surrey Cycleway)</p></li>
</ul>
<p><strong>Common key values for ways and relations</strong></p>
<p>Common <a href="https://taginfo.openstreetmap.org/keys/type#values" class="external-link">type</a> key values. <br> Common <a href="https://taginfo.openstreetmap.org/keys/route#values" class="external-link">route</a> key values. <br> Common <a href="https://taginfo.openstreetmap.org/keys/network#values" class="external-link">network</a> key values.<br> Common <a href="https://taginfo.openstreetmap.org/keys/cycle_network#values" class="external-link">cycle_network</a> key values.<br></p>
<p>Common <a href="https://taginfo.openstreetmap.org/keys/lcn#values" class="external-link">lcn</a> key values.<br> Common <a href="https://taginfo.openstreetmap.org/keys/ncn#values" class="external-link">ncn</a> key values.<br></p>
<p>Note that <code>*_ref</code> key values for ncn &amp; lcn routes do not have common key values, asthis field acts as a reference field for information on the cycle route (i.e for NCN 5, ncn_ref = 5)</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by James Hulse, Greta Timaite, Robin Lovelace.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
